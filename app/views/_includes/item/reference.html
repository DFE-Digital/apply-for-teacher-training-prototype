{% set titleText = item.name %}

{% if item.status == 'Received by training provider' %}
  {% set referenceStatusHtml %}
    <p class="govuk-body govuk-!-margin-top-4">{{ item.name }} will not be asked to give you another reference.</p>

    <p class="govuk-body">If you accept an offer, your previous reference will be shown to the provider.</p>
  {% endset %}
{% endif %}

{{ appSummaryCard({
  classes: "govuk-!-margin-bottom-6",
  headingLevel: 3,
  titleText: titleText,
  actions: {
    items: [{
      href: "/application/" + applicationId + "/references/" + item.id + "/delete",
      text: "Delete"
    }]
  },
  html: govukSummaryList({
    rows: [
      {
        key: {
          text: "Type"
        },
        value: {
          text: item.type
        },
        actions: {
          items: [
            {
              text: "Change",
              href: "/application/" + applicationId + "/references/" + item.id + "/type"
            } if item.status == 'Not sent'
          ]
        }
      },
      {
        key: {
          text: "Name"
        },
        value: {
          text: item.name
        },
        actions: {
          items: [
            {
              text: "Change",
              href: "/application/" + applicationId + "/references/" + item.id + "/name"
            } if item.status == 'Not sent'
          ]
        }
      },
      {
        key: {
          text: "Email"
        },
        value: {
          text: item.email
        },
        actions: {
          items: [
            {
              text: "Change",
              href: "/application/" + applicationId + "/references/" + item.id + "/email"
            } if item.status == 'Not sent'
          ]
        }
      },
      {
        key: {
          text: "How you know them and for how long"
        },
        value: {
          text: item.relationship
        },
        actions: {
          items: [
            {
              text: "Change",
              href: "/application/" + applicationId + "/references/" + item.id + "/relationship"
            } if item.status == 'Not sent'
          ]
        }
      },
      {
        key: {
          text: 'Status'
        },
        value: {
          html: referenceStatusHtml
        }
      } if item.status == 'Received by training provider'
    ]
  })
  })
}}
