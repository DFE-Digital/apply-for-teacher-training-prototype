{% extends "_form-wide.html" %}

{% set applicationPath = "/application/" + applicationId %}
{% set formaction = applicationPath %}
{% set title = "Degree" %}
{% set allowsFeedback = true %}
{% set referrer = applicationPath + "/degree/review" %}
{% set canAmend = true %}
{% set degreeCount = applicationValue(["degree"]) | length %}


{% block pageNavigation %}
  {{ govukBackLink({
    href: "/application/" + applicationId,
    text: "Back to application"
  }) }}
{% endblock %}

{% block primary %}

  {% set addDegreeButton %}
    {{ govukButton({
      text: ("Add another degree" if degreeCount > 0 else "Add degree"),
      classes: ("govuk-button--secondary" if (meetsMinimumDegreeCriteria) else ""),
      href: applicationPath + "/degree/add"
    }) }}
  {% endset %}

  {% if degreeCount == 0 or not meetsMinimumDegreeCriteria  %}
    <p class="govuk-body">You need a Bachelor degree or equivalent to start teacher training.</p>
    <p class="govuk-body">Add your Bachelor degree even if you have not got your grade yet.</p>
    <p class="govuk-body">You can also add any other degrees that you have, or you’re working towards.</p>
    {{ addDegreeButton | safe }}
  {% else %}
    {{ addDegreeButton | safe }}
  {% endif %}



  {% if degreeCount > 0 %}

    {% include "_includes/review/degrees.html" %}

    {% if meetsMinimumDegreeCriteria %}
      {{ govukRadios({
        fieldset: {
          classes: "govuk-!-width-two-thirds",
          legend: {
            text: "Have you completed this section?",
            classes: "govuk-fieldset__legend--m"
          }
        },
        items: [{
          value: "true",
          text: "Yes, I’ve completed this section"
        }, {
          value: "false",
          text: "No, I’ll come back to it later"
        }]
      } | decorateApplicationAttributes(["completed", "degree"])) }}

      {{ govukButton({
        text: "Continue"
      }) }}

    {% endif %}



  {% endif %}
{% endblock %}
