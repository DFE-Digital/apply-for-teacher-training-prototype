{% extends "layouts/main.html" %}

{% set title = "What’s your immigration status?" %}
{% set formaction = "/application/" + "/personal-information/immigration-status" %}

{% block beforeContent %}
  {{ govukBackLink({
    href: (referrer if referrer else "/application/" + "/personal-information/immigration/")
  }) }}
{% endblock %}

{% block formBody %}
  {% if isEuropeanCitizen == true %}
    {{ govukRadios({
      fieldset: {
        legend: {
          html: title,
          classes: "govuk-fieldset__legend--l",
          isPageHeading: true
        },
        attributes: {
          "data-module": "clear-hidden"
        }
      },
      items: [{
        value: "EU settled status",
        text: "EU settled status"
      }, {
        value: "EU pre-settled status",
        text: "EU pre-settled status"
      }, {
        value: "other",
        text: "Another immigration status",
        conditional: {
          html: govukCharacterCount({
            label: {
              text: "Immigration status"
            },
            hint: {
              text: "For example, “Indefinite leave to remain”."
            },
            threshold: 90,
            maxwords: 200,
            rows: 5
          } | decorateApplicationAttributes(["candidate", "immigrationStatusDetails"]))
        }
      }]
    } | decorateApplicationAttributes(["candidate", "immigrationStatus"])) }}
  {% else %}
    {{ govukCharacterCount({
      label: {
        text: title,
        classes: "govuk-label--l"
      },
      hint: {
        text: "For example, “I have permanent residence”."
      },
      maxwords: 200,
      rows: 5
    } | decorateApplicationAttributes(["candidate", "immigrationStatusDetails"])) }}
  {% endif %}

  {{ govukButton({
    text: "Save and continue"
  }) }}
{% endblock %}
