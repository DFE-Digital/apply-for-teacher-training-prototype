{% extends "_form.html" %}

{% set formaction = "/reference/confirmation" %}
{% set candidate_name = "Jane Doe" %}
{% set title = "Your reference for " + candidate_name %}
{% set hasAccountLinks = false %}

{% block primary %}
  {% if data.reference.relationship.correct == "Yes" %}
    {% set relationshipValue %}
      You confirmed this as correct.
    {% endset %}
  {% else %}
    {% set relationshipValue = "Amended to: " + data.reference.relationship.correction %}
  {% endif %}

  {% if data.reference.safeguarding.concern == "Yes" %}
    {% set safeguardingValue = data.reference.safeguarding.reason %}
  {% else %}
    {% set safeguardingValue = data.reference.safeguarding.concern %}
  {% endif %}

  <p class="govuk-body">If you're not ready to submit yet, you can return using the link in your email.</p>

  {{ govukSummaryList({
    rows: [{
      key: {
        text: "Relationship"
      },
      value: {
        text: relationshipValue | safe
      },
      actions: {
        items: [{
          href: "/reference/relationship?referrer=/reference/review",
          text: "Change",
          visuallyHiddenText: "relationship to candidate"
        }]
      }
    }, {
      key: {
        text: "Concerns about candidate working with children"
      },
      value: {
        text: safeguardingValue
      },
      actions: {
        items: [{
          href: "/reference/safeguarding?referrer=/reference/review",
          text: "Change",
          visuallyHiddenText: "safeguarding answer"
        }]
      }
    }, {
      key: {
        text: "Additional information (optional)"
      },
      value: {
        html: (data.reference.comments or "Not entered")
      },
      actions: {
        items: [{
          href: "/reference/comments?referrer=/reference/review",
          text: "Change",
          visuallyHiddenText: "reference"
        }]
      }
    }]
  }) }}

  {{ govukButton({
    text: "Submit reference"
  }) }}
{% endblock %}
